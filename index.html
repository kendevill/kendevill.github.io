<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload ·∫£nh FreeImage.host</title>

<style>
* { box-sizing: border-box; }
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f2f5f9;
}

.container {
  max-width: 1000px;
  margin: 20px auto;
  padding: 10px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.card {
  background: #fff;
  border-radius: 10px;
  padding: 15px;
  box-shadow: 0 2px 8px rgba(0,0,0,.1);
}

h3 {
  margin: 0 0 15px 0;
  background: #0b4f6c;
  color: #fff;
  padding: 10px;
  border-radius: 8px;
  text-align: center;
}

input[type=file],
input[type=text] {
  width: 100%;
  margin: 8px 0;
}

button {
  width: 100%;
  padding: 12px;
  font-size: 15px;
  background: #0b4f6c;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

button:disabled {
  opacity: .6;
  cursor: not-allowed;
}

#previewImage {
  max-width: 100%;
  max-height: 220px;
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 4px;
  margin-top: 10px;
}

.result img {
  margin-top: 10px;
  max-width: 100%;
  border-radius: 6px;
}

@media (max-width: 768px) {
  .container {
    grid-template-columns: 1fr;
  }
}
</style>
</head>

<body>

<div class="container">
  <div class="card">
    <h3>üì∑ Upload ·∫£nh</h3>

    <input type="file" id="fileInput" accept="image/*">

    <img id="previewImage" style="display:none">

    <button id="uploadBtn">‚¨Ü Upload ·∫£nh</button>

    <div class="result" id="result"></div>
  </div>

  <div class="card">
    <h3>‚ùì Th√¥ng tin</h3>
    <p>‚Ä¢ Upload tr·ª±c ti·∫øp l√™n FreeImage.host</p>
    <p>‚Ä¢ Link vƒ©nh vi·ªÖn</p>
    <p>‚Ä¢ Kh√¥ng c·∫ßn backend</p>
  </div>
</div>

<script>
const API_KEY = "6d207e02198a847aa98d0a2a901485a5"; // ‚ùå L·ªò API KEY

const fileInput = document.getElementById("fileInput");
const preview = document.getElementById("previewImage");
const uploadBtn = document.getElementById("uploadBtn");
const result = document.getElementById("result");

/* Preview */
fileInput.addEventListener("change", () => {
  const file = fileInput.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = e => {
    preview.src = e.target.result;
    preview.style.display = "block";
  };
  reader.readAsDataURL(file);
});

/* Upload */
uploadBtn.addEventListener("click", async () => {
  const file = fileInput.files[0];
  if (!file) return alert("Ch∆∞a ch·ªçn ·∫£nh");

  uploadBtn.disabled = true;
  uploadBtn.innerText = "ƒêang upload...";

  const fd = new FormData();
  fd.append("source", file);

  try {
    const res = await fetch(
      `https://freeimage.host/api/1/upload?key=${API_KEY}`,
      { method: "POST", body: fd }
    );

    const data = await res.json();

    if (!data.image) throw "Upload l·ªói";

    result.innerHTML = `
      <p>Link ·∫£nh:</p>
      <input type="text" value="${data.image.url}" onclick="this.select()">
      <img src="${data.image.url}">
    `;
  } catch {
    alert("Upload th·∫•t b·∫°i");
  }

  uploadBtn.disabled = false;
  uploadBtn.innerText = "‚¨Ü Upload ·∫£nh";
});
</script>

</body>
</html>
